<!DOCTYPE html>
<html lang="ar" dir="rtl">
<he
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Intro - YouTube</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; }

        /* Ø­Ø§ÙˆÙŠØ© Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ */
        #intro-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 9999; background: #000;
            transition: opacity 1.5s ease;
        }

        /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù„Ø¶Ù…Ø§Ù† Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø© */
        .video-foreground {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; /* Ù„Ù…Ù†Ø¹ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø£Ø²Ø±Ø§Ø± ÙŠÙˆØªÙŠÙˆØ¨ */
        }

        /* ØªØ¶Ù…ÙŠÙ† ÙŠÙˆØªÙŠÙˆØ¨ */
        #intro-screen iframe {
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            transform: scale(1.5); /* ØªÙƒØ¨ÙŠØ± Ø¨Ø³ÙŠØ· Ù„Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø­ÙˆØ§Ù Ø§Ù„Ø³ÙˆØ¯Ø§Ø¡ */
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
        .loader-container {
            position: absolute;
            bottom: 10%; left: 50%;
            transform: translateX(-50%);
            width: 250px; text-align: center; z-index: 10000;
        }

        .loader-bar {
            width: 100%; height: 3px;
            background: rgba(255,255,255,0.2);
            margin-top: 10px; border-radius: 5px; overflow: hidden;
        }

        .loader-progress {
            width: 0%; height: 100%;
            background: #00d4ff; box-shadow: 0 0 10px #00d4ff;
        }

        .loading-text { color: #fff; font-size: 10px; letter-spacing: 3px; font-family: sans-serif; }

        /* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ */
        #main-site {
            color: white; text-align: center; padding-top: 45vh;
            font-family: sans-serif; opacity: 0; transition: 2s;
        }

        .fade-out { opacity: 0 !important; visibility: hidden; }
        .show { opacity: 1 !important; }
    </style>
<
<body>

    <div id="intro-screen">
        <div class="video-foreground">
            <iframe src="https://www.youtube.com/embed/EgmUDwEYeoo?autoplay=1&mute=1&controls=0&loop=1&playlist=EgmUDwEYeoo&showinfo=0&rel=0" 
                    frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        </div>

        <div class="loader-container">
            <div class="loading-text">ØªØ­Ù…ÙŠÙ„...ğŸ”„</div>
            <div class="loader-bar"><div class="loader-progress" id="bar"></div></div>
        </div>
    </div>

    <div id="main-site">
           </div>

    <script>
        window.onload = function() {
            let bar = document.getElementById('bar');
            let intro = document.getElementById('intro-screen');
            let main = document.getElementById('main-site');
            let width = 0;

            let interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);
                    intro.classList.add('fade-out');
                    setTimeout(() => {
                        main.classList.add('show');
                        document.body.style.overflow = "auto";
                    }, 1000);
                } else {
                    width += Math.random() * 5;
                    if (width > 100) width = 100;
                    bar.style.width = width + '%';
                }
            }, 150);
        };
    </script>

</body>
</html>

<!DOCTYPE html>
<html lang="ar" dir="rtl">

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ø³Ù†Ù‡ ØºÙŠØ±ğŸ¥¹â™¥ï¸</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
<style>
:root { --gold:#f1c40f; --card:#fff8f0; --text:#222; --wall:#5d4037; }
body {background:#fdf5e6; color:var(--text); font-family:'Cairo',sans-serif; margin:0; padding-bottom:50px; text-align:center; overflow-x:hidden;}
.rope {position:fixed;top:0;width:100%;height:60px;background:url('https://i.ibb.co/2YhV1sGb/png-transparent-light-light-source-holiday-decorations-illumination-1-removebg-preview.png') repeat-x;background-size:contain;z-index:999;animation:glow 2s infinite alternate;}
@keyframes glow{0%{filter:drop-shadow(0 0 5px var(--gold));}50%{filter:drop-shadow(0 0 15px var(--gold));}100%{filter:drop-shadow(0 0 25px var(--gold));}}
.container{max-width:900px;margin:auto;padding:10px;}
.card{background:var(--card);border:2px solid var(--gold);border-radius:20px;padding:20px;margin:20px 0;box-shadow:0 0 15px rgba(241,196,15,0.3);}
canvas{background:#000;border:4px solid var(--gold);display:block;margin:auto;border-radius:10px;}
.controls{display:grid;grid-template-columns:repeat(3,75px);gap:10px;justify-content:center;margin-top:15px;} 
.btn-ctrl{width:75px;height:75px;background:#fff8f0;border:2px solid var(--gold);color:var(--text);border-radius:15px;font-size:24px;cursor:pointer;box-shadow:0 0 5px rgba(241,196,15,0.5);}
.btn-ctrl:active{background:var(--gold);color:black;}
.scroll-box{height:100px;overflow-y:auto;background:#fff5e0;padding:10px;border-radius:10px;border:2px solid var(--gold);margin:10px 0;font-size:1.1rem;}
.quiz-option{display:block;width:100%;padding:12px;margin:8px 0;background:#fff5e0;border:2px solid var(--gold);color:var(--text);border-radius:8px;cursor:pointer;text-align:right;}
.main-btn{background:var(--gold);color:black;border:none;padding:12px 25px;border-radius:10px;font-weight:bold;cursor:pointer;font-size:1rem;}
#answer-feedback{display:none;padding:10px;margin:10px 0;font-weight:bold;color:white;border-radius:10px;}
.footer{margin-top:50px; color:#555; font-size:1rem; line-height:1.5; text-align:center;}
</style>


<div class="rope"></div>
<div class="container">
<h>Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ…</h>
    <div class="prayer-container" style="position: relative; z-index: 10; margin-top: 20px;">
        <h3 style="margin: 10px 0; font-size: 1.2rem; color: #ffcc00; text-align: center;">ğŸ•’ Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© - Ø§Ù„Ø£Ø±Ø¯Ù†</h3>
        <div style="width: 100%; overflow: hidden; border-radius: 15px;">
            <iframe id="iframe3" 
                src="https://timesprayer.today/widget_frame.php?frame=3&id=355&sound=false" 
                style="width: 100%; height: 363px; border: none; filter: invert(90%) hue-rotate(180deg) brightness(1.1); display: block;">
            </iframe>
        </div>
    </div>

<!-- Ø§Ù„Ù‚Ø±Ø¢Ù† -->
<div class="card">
<h3>ğŸ“– Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</h3>
<button class="main-btn" onclick="window.open('https://quran.ksu.edu.sa/m.php#aya=1_1&t=1','_blank')">ÙØªØ­ Ø§Ù„Ù…ØµØ­Ù</button>
</div>

<!-- Ø§Ù„Ø£Ø¯Ø¹ÙŠØ© -->
<div class="card">
<h3>ğŸ¤² Ø£Ø¯Ø¹ÙŠØ© Ø±Ù…Ø¶Ø§Ù†ÙŠØ©</h3>
<div id="dua-box" class="scroll-box"></div>
<button class="main-btn" onclick="nextDua()">Ø¯Ø¹Ø§Ø¡ Ø¢Ø®Ø±</button>
</div>

<!-- Ø§Ù„Ø£Ø°ÙƒØ§Ø± -->
<div class="card">
<h3>âœ¨ Ø£Ø°ÙƒØ§Ø± Ø±Ù…Ø¶Ø§Ù†ÙŠØ©</h3>
<div id="azkar-box" class="scroll-box"></div>
<button class="main-btn" onclick="nextZekr()">Ø°ÙƒØ± Ø¢Ø®Ø±</button>
</div>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù…Ø³Ø¨Ø­Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</title>
    <style>
        /* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®Ù„ÙÙŠØ© Ù„ØªÙ†Ø§Ø³Ø¨ Ù…ÙˆÙ‚Ø¹Ùƒ */
         {
            background-color: #F5F5DC; /* Ù„ÙˆÙ† Ø¨ÙŠØ¬ */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù…Ø³Ø¨Ø­Ø© */
        .tasbih-card {
            background: #ffffff; /* Ø£Ø¨ÙŠØ¶ ØµØ±ÙŠØ­ Ù„ÙŠÙƒØ³Ø± Ø§Ù„Ø¨ÙŠØ¬ */
            padding: 40px;
            border-radius: 40px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.05); /* Ø¸Ù„ Ù†Ø§Ø¹Ù… Ø¬Ø¯Ø§Ù‹ */
            border: 1px solid #e0e0d1;
            text-align: center;
            width: 280px;
        }

        .tasbih-title {
            color: #8B4513; /* Ø¨Ù†ÙŠ Ø®Ø´Ø¨ÙŠ */
            font-size: 18px;
            margin-bottom: 10px;
            font-weight: bold;
        }

        /* Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ù‚Ù… */
        #counter {
            font-size: 85px;
            color: #5D6D7E; /* Ø±Ù…Ø§Ø¯ÙŠ Ù…Ø²Ø±Ù‚ ØºØ§Ù…Ù‚ */
            margin: 15px 0;
            font-weight: bold;
        }

        /* Ø§Ù„Ø²Ø± Ø§Ù„ÙƒØ¨ÙŠØ± */
        .click-btn {
            width: 130px;
            height: 130px;
            border-radius: 50%;
            border: none;
            background: #6B8E23; /* Ø£Ø®Ø¶Ø± Ø²ÙŠØªÙˆÙ†ÙŠ - ÙŠØªÙ†Ø§Ø³Ù‚ Ø¬Ø¯Ø§Ù‹ Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ¬ */
            color: white;
            font-size: 22px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 8px 0 #4B6318; /* Ø¸Ù„ Ø§Ù„Ø²Ø± */
            transition: all 0.1s;
            outline: none;
        }

        .click-btn:active {
            transform: translateY(4px);
            box-shadow: 0 4px 0 #4B6318;
        }

        /* Ø²Ø± Ø§Ù„ØªØµÙÙŠØ± */
        .reset-btn {
            margin-top: 25px;
            background: none;
            border: 1px solid #d1d1c0;
            color: #a0a08b;
            padding: 5px 15px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 13px;
            transition: 0.3s;
        }

        .reset-btn:hover {
            background: #fdfdf5;
            color: #8B4513;
        }
    </style>


    <div class="tasbih-card">
        <div class="tasbih-title">Ø§Ù„Ù…Ø³Ø¨Ø­Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</div>
        <div id="counter">0</div>
        <button class="click-btn" onclick="hit()">Ø³Ø¨Ù‘Ø­</button>
        <br>
        <button class="reset-btn" onclick="reset()">ØªØµÙÙŠØ± Ø§Ù„Ø¹Ø¯Ø§Ø¯</button>
    </div>

    <script>
        let count = 0;
        const counterElement = document.getElementById('counter');

        function hit() {
            count++;
            counterElement.innerText = count;
            
            // Ø§Ù‡ØªØ²Ø§Ø² Ø¨Ø³ÙŠØ· Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„
            if (navigator.vibrate) {
                navigator.vibrate(40);
            }
        }

        function reset() {
            if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØµÙÙŠØ± Ø§Ù„Ø¹Ø¯Ø§Ø¯ØŸ")) {
                count = 0;
                counterElement.innerText = count;
            }
        }
    </script>

</body>
</html>


<div class="card">
    <h2>ğŸ® Ù…ØªØ§Ù‡Ø© Ø§Ù„ÙÙˆØ§Ù†ÙŠØ³</h2>
    <button id="start-btn" class="main-btn">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
    <button id="end-btn" class="main-btn">ØªÙˆÙ‚Ù Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
    <p>Ø§Ù„Ù…Ø±Ø­Ù„Ø©: <span id="lvl">1</span> | Ø§Ù„ÙÙˆØ§Ù†ÙŠØ³: <span id="coll-count">0</span> / 3</p>
    <canvas id="game" width="320" height="320"></canvas>
    <div class="controls">
        <div></div><button class="btn-ctrl" onclick="move(0,-1)">â¬†ï¸</button><div></div>
        <button class="btn-ctrl" onclick="move(1,0)">â¡ï¸</button>
        <button class="btn-ctrl" onclick="move(0,1)">â¬‡ï¸</button>
        <button class="btn-ctrl" onclick="move(-1,0)">â¬…ï¸</button>
    </div>
</div>
<!-- Ù…Ø³Ø§Ø¨Ù‚Ø© Ø±Ù…Ø¶Ø§Ù† -->
<div class="card">
<h2>â“Ù…Ø³Ø§Ø¨Ù‚Ø© Ø±Ù…Ø¶Ø§Ù†</h2>
<p id="q-text" style="color:var(--gold);font-size:1.2rem;"></p>
<div id="options-container"></div>
<div id="answer-feedback"></div>
<p>Ø§Ù„Ø³Ø¤Ø§Ù„: <span id="q-num">1</span>/100 | Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="quiz-score">0</span></p>
</div>


<script>
// ====== Ø§Ù„Ø£Ø¯Ø¹ÙŠØ© ÙˆØ§Ù„Ø£Ø°ÙƒØ§Ø± ======
const duas = [
    "Ø§Ù„Ù„Ù‡Ù… Ø¨Ù„ØºÙ†Ø§ Ø±Ù…Ø¶Ø§Ù† ÙˆØ£Ù†Øª Ø±Ø§Ø¶Ù Ø¹Ù†Ø§",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ ØµÙŠØ§Ù…Ù†Ø§ Ù…Ù‚Ø¨ÙˆÙ„Ø§Ù‹",
    "Ø§Ù„Ù„Ù‡Ù… Ø£Ø¹Ù†Ø§ Ø¹Ù„Ù‰ Ù‚ÙŠØ§Ù… Ø§Ù„Ù„ÙŠÙ„",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù†Ø§ Ù…Ù† Ø¹ØªÙ‚Ø§Ø¦Ùƒ Ù…Ù† Ø§Ù„Ù†Ø§Ø±",
    "Ø§Ù„Ù„Ù‡Ù… Ø§ØºÙØ± Ù„Ù†Ø§ Ø°Ù†ÙˆØ¨Ù†Ø§",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù†Ø§ Ù…Ù…Ù† ÙŠÙƒØªØ¨ Ù„Ù‡Ù… Ø§Ù„Ø®ÙŠØ±",
    "Ø§Ù„Ù„Ù‡Ù… ØªÙ‚Ø¨Ù„ ØµÙŠØ§Ù…Ù†Ø§ ÙˆÙ‚ÙŠØ§Ù…Ù†Ø§",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø±Ø²Ù‚Ù†Ø§ Ø¨Ø±ÙƒØ© Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù†Ø§ Ù…Ù† Ø§Ù„Ù…Ù‚Ø¨ÙˆÙ„ÙŠÙ†",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù†Ø§ Ù…Ù† Ø£Ù‡Ù„ Ø§Ù„Ù‚Ø±Ø¢Ù†",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù†Ø§ Ù…Ù† Ø¹Ø¨Ø§Ø¯Ùƒ Ø§Ù„ØµØ§Ù„Ø­ÙŠÙ†",
    "Ø§Ù„Ù„Ù‡Ù… Ù…Ù…Ù† ÙŠØºØªÙ†Ù… Ù„ÙŠØ§Ù„ÙŠ Ø±Ù…Ø¶Ø§Ù†",
    "Ø§Ù„Ù„Ù‡Ù… Ø£Ø¹Ù†Ø§ Ø¹Ù„Ù‰ Ø§Ù„ØµÙŠØ§Ù… ÙˆØ§Ù„Ù‚ÙŠØ§Ù…",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù†Ø§ Ù…Ù…Ù† ÙŠÙØ±Ø­ Ø¨Ù‚Ø¯ÙˆÙ… Ø±Ù…Ø¶Ø§Ù†"
];
const azkar = [
    "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø­Ù…Ø¯Ù‡",
    "Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡",
    "Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡",
    "Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡",
    "Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø±",
    "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ Ø§Ù„Ø¹Ø¸ÙŠÙ…",
    "Ù„Ø§ Ø­ÙˆÙ„ ÙˆÙ„Ø§ Ù‚ÙˆØ© Ø¥Ù„Ø§ Ø¨Ø§Ù„Ù„Ù‡",
    "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø­Ù…Ø¯Ù‡ Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ Ø§Ù„Ø¹Ø¸ÙŠÙ…",
    "Ø§Ù„Ù„Ù‡Ù… ØµÙ„Ù ÙˆØ³Ù„Ù… Ø¹Ù„Ù‰ Ù†Ø¨ÙŠÙ†Ø§ Ù…Ø­Ù…Ø¯",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ø°ÙƒØ±Ù†Ø§ Ø®Ø§Ù„ØµØ§Ù‹ Ù„Ùƒ"
];

function nextDua(){
    document.getElementById('dua-box').innerText = duas[Math.floor(Math.random() * duas.length)];
}
function nextZekr(){
    document.getElementById('azkar-box').innerText = azkar[Math.floor(Math.random() * azkar.length)];
}

// ====== Ø§Ù„Ù„Ø¹Ø¨Ø© ======
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const tile = 32;
let player = {x:1,y:1}, enemy = {x:8,y:8}, boxes = [], collected=0, level=1;
let maze = [], countdown=0, countdownActive=false;
let gameRunning = false; // Ø§Ù„Ù„Ø¹Ø¨Ø© Ù…ØªÙˆÙ‚ÙØ© Ø¹Ù†Ø¯ Ø¯Ø®ÙˆÙ„ Ø§Ù„ØµÙØ­Ø©

function generateMaze() {
    let m;
    let valid = false;
    while(!valid) {
        m = Array.from({length:10}, ()=>Array(10).fill(0));
        for(let i=0;i<10;i++){ m[0][i]=1; m[9][i]=1; m[i][0]=1; m[i][9]=1; }
        let wallCount=15;
        while(wallCount>0){
            let x=Math.floor(Math.random()*8)+1;
            let y=Math.floor(Math.random()*8)+1;
            if((x===1 && y===1)||m[y][x]===1) continue;
            m[y][x]=1; wallCount--;
        }
        enemy = {x:8,y:8};
        boxes = [];
        while(boxes.length<7){
            let x=Math.floor(Math.random()*8)+1, y=Math.floor(Math.random()*8)+1;
            if(m[y][x]===0 && (x!==1||y!==1) && (x!==enemy.x||y!==enemy.y)) boxes.push({x,y});
        }
        valid = boxes.every(b=>isReachable(1,1,b.x,b.y,m)) && isReachable(1,1,enemy.x,enemy.y,m);
    }
    return m;
}

function isReachable(sx,sy,tx,ty,m){
    let visited = Array.from({length:10}, ()=>Array(10).fill(false));
    let queue=[[sx,sy]]; visited[sy][sx]=true;
    const dirs=[[1,0],[-1,0],[0,1],[0,-1]];
    while(queue.length>0){
        let [x,y]=queue.shift();
        if(x===tx && y===ty) return true;
        for(let [dx,dy] of dirs){
            let nx=x+dx, ny=y+dy;
            if(nx>=0 && nx<10 && ny>=0 && ny<10 && !visited[ny][nx] && m[ny][nx]===0){
                visited[ny][nx]=true;
                queue.push([nx,ny]);
            }
        }
    }
    return false;
}

function startLevel(){
    player={x:1,y:1}; boxes=[]; collected=0; countdownActive=false;
    maze = generateMaze();
    document.getElementById("coll-count").innerText="0";
    while(boxes.length<7){
        let x=Math.floor(Math.random()*8)+1, y=Math.floor(Math.random()*8)+1;
        if(maze[y][x]===0 && !boxes.find(b=>b.x===x && b.y===y)) boxes.push({x,y,open:false,lantern:false});
    }
    [...boxes].sort(()=>Math.random()-0.5).slice(0,3).forEach(b=>b.lantern=true);
    draw();
}

function draw(){
    ctx.clearRect(0,0,320,320);
    for(let y=0;y<10;y++) for(let x=0;x<10;x++)
        if(maze[y][x]===1) ctx.fillStyle="#5d4037", ctx.fillRect(x*tile,y*tile,tile,tile);
    ctx.font="20px Arial"; ctx.textAlign="center"; ctx.textBaseline="middle";
    boxes.forEach(b=>ctx.fillText(b.open?(b.lantern?"ğŸ®":"âŒ"):"ğŸ“¦",b.x*tile+tile/2,b.y*tile+tile/2));
    ctx.fillText("ğŸš¶",player.x*tile+tile/2,player.y*tile+tile/2);
    ctx.fillText("ğŸ¥£",enemy.x*tile+tile/2,enemy.y*tile+tile/2);
    if(countdownActive){ctx.fillStyle="red"; ctx.font="40px Arial"; ctx.fillText(countdown,160,50);}
}

function move(dx,dy){
    if(!gameRunning) return;
    let nx=player.x+dx, ny=player.y+dy;
    if(maze[ny][nx]===0) player={x:nx,y:ny};
    boxes.forEach(b=>{
        if(!b.open && b.x===player.x && b.y===player.y){
            b.open=true;
            if(b.lantern) collected++;
            document.getElementById("coll-count").innerText=collected;
        }
    });
    checkCollision(); draw();
    if(collected===3){ 
        alert("Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ø±Ø­Ù„Ø© "+level+"!");
        level++;
        document.getElementById("lvl").innerText=level;
        startLevel();
    }
}

function moveEnemy(){
    if(!gameRunning) return;
    if(Math.random()>0.3){
        if(enemy.x<player.x && maze[enemy.y][enemy.x+1]===0) enemy.x++;
        else if(enemy.x>player.x && maze[enemy.y][enemy.x-1]===0) enemy.x--;
        if(enemy.y<player.y && maze[enemy.y+1][enemy.x]===0) enemy.y++;
        else if(enemy.y>player.y && maze[enemy.y-1][enemy.x]===0) enemy.y--;
    }
    checkCollision(); draw();
}
setInterval(moveEnemy,500);

function checkCollision(){
    let dx=Math.abs(player.x-enemy.x), dy=Math.abs(player.y-enemy.y);
    if(dx<=1 && dy<=1 && !countdownActive){
        countdownActive=true; countdown=3;
        let timer=setInterval(()=>{
            countdown--; draw();
            if(countdown<=0){
                clearInterval(timer);
                if(Math.abs(player.x-enemy.x)<=1 && Math.abs(player.y-enemy.y)<=1){
                    alert("ğŸ¥£ Ù…Ø³ÙƒÙƒ ØµØ­Ù† Ø§Ù„ØªÙ…Ø± ğŸ˜” Ù„Ù‚Ø¯ Ø®Ø³Ø±Øª!");
                    gameRunning = false; // ØªÙˆÙ‚Ù Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø³Ø§Ø±Ø©
                    player={x:1,y:1};
                    enemy={x:8,y:8};
                    boxes=[];
                    collected=0;
                    level=1;
                    document.getElementById("lvl").innerText=level;
                    document.getElementById("coll-count").innerText=collected;
                    maze = Array.from({length:10}, ()=>Array(10).fill(0));
                    draw();
                }
                countdownActive=false;
            }
        },1000);
    }
    if(dx>2 || dy>2) countdownActive=false;
}

// ====== Ø§Ù„ÙƒÙŠØ¨ÙˆØ±Ø¯ ======
window.onkeydown = e => {
    if(e.key==="ArrowUp") move(0,-1);
    if(e.key==="ArrowDown") move(0,1);
    if(e.key==="ArrowLeft") move(-1,0);
    if(e.key==="ArrowRight") move(1,0);
};

// ====== Quiz Ù…Ø¹ Feedback ======
let qIdx=0, score=0;
const questions=[
    {q:"ÙƒÙ… Ø¹Ø¯Ø¯ Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ØŸ",o:["3","5","4","6"],c:1},
    {q:"Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø°ÙŠ Ù†Ø²Ù„ ÙÙŠÙ‡ Ø§Ù„Ù‚Ø±Ø¢Ù†ØŸ",o:["Ø´ÙˆØ§Ù„","Ø±Ù…Ø¶Ø§Ù†","Ø´Ø¹Ø¨Ø§Ù†","Ø±Ø¬Ø¨"],c:1},
     {q:"Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù‚Ø¨Ù„Ø© ÙÙŠ Ø§Ù„ØµÙ„Ø§Ø©ØŸ",o:["Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©","Ø§Ù„ÙƒØ¹Ø¨Ø©","Ø§Ù„Ù‚Ø¯Ø³","Ù…ÙƒØ©"],c:1},
    {q:"Ù…Ø§ Ù‡ÙŠ Ø§ÙˆÙ„Ù‰ Ø§Ù„Ù‚Ø¨Ù„ØªÙŠÙ†ØŸ",o:["Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©","Ø§Ù„ÙƒØ¹Ø¨Ø©","Ø§Ù„Ù‚Ø¯Ø³","Ù…ÙƒØ©"],c:2},
];

function loadQuiz(){
    let q=questions[qIdx];
    document.getElementById("q-text").innerText=q.q;
    document.getElementById("q-num").innerText=qIdx+1;
    let cont=document.getElementById("options-container");
    cont.innerHTML="";
    q.o.forEach((opt,i)=>{
        let btn=document.createElement("button");
        btn.className="quiz-option";
        btn.innerText=opt;
        btn.onclick=()=>{
            const feedback=document.getElementById("answer-feedback");
            if(i===q.c){
                score+=10;
                feedback.innerText="âœ… Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©!";
                feedback.style.background="#4CAF50";
            } else {
                feedback.innerText="âŒ Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©!";
                feedback.style.background="#F44336";
            }
            feedback.style.display="block";
            setTimeout(()=>{feedback.style.display="none";},2000);
            qIdx++;
            if(qIdx>=questions.length) qIdx=0;
            document.getElementById("quiz-score").innerText=score;
            loadQuiz();
        };
        cont.appendChild(btn);
    });
}

// ====== Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆØ§Ù„Ù†Ù‡Ø§ÙŠØ© Ù„Ù„Ø¹Ø¨Ø© ======
document.getElementById("start-btn").onclick = function(){
    gameRunning = true;
    startLevel();
};
document.getElementById("end-btn").onclick = function(){
    gameRunning = false;
    player={x:1,y:1};
    enemy={x:8,y:8};
    boxes=[];
    collected=0;
    level=1;
    document.getElementById("lvl").innerText = level;
    document.getElementById("coll-count").innerText = collected;
    maze = Array.from({length:10},()=>Array(10).fill(0));
    draw();
};

// ====== ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£Ø¯Ø¹ÙŠØ© ÙˆØ§Ù„Ø£Ø°ÙƒØ§Ø± ÙˆØ§Ù„Ù€ Quiz ======
nextDua(); nextZekr(); loadQuiz();
</script>
<!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø£Ø°ÙƒØ§Ø± Ø§Ù„ÙŠÙˆÙ…ÙŠØ© -->
<div id="azkar-modal" style="
    display:none;
    position:fixed;
    top:50%; left:50%;
    transform:translate(-50%, -50%);
    width:90%; max-width:600px;
    max-height:80%;
    overflow-y:auto;
    background:#1a1a1a;
    color:#ffcc00;
    border:2px solid #ffcc00;
    border-radius:20px;
    padding:20px;
    box-shadow:0 0 20px rgba(255,204,0,0.5);
    z-index:9999;
">
    <img src="https://pbs.twimg.com/media/GwoZdivXoAAB2wN.jpg" alt="Ø£Ø°ÙƒØ§Ø± Ø±Ù…Ø¶Ø§Ù†" style="width:100%; border-radius:15px; margin-bottom:15px;">
    <div style="text-align:right; line-height:1.6; font-size:1rem;">
        - Ø§Ù„Ù„Ù‡Ù… Ù„Ø§ ØªØ¤Ø§Ø®Ø°Ù†Ø§ Ø¨Ù…Ø§ ÙØ¹Ù„Ù†Ø§ Ù…Ù† Ù…Ø¹Ø§Øµ ÙˆØ£Ø®Ø·Ø§Ø¡ØŒ Ùˆ